<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>Functions</title>
		<link
			rel="icon"
			href="https://getbootstrap.com/docs/4.0/assets/img/favicons/favicon.ico"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css"
		/>

		<link rel="stylesheet" href="/assets/css/style.css" />
	</head>

	<body>
		<section>
			<!--for demo wrap-->
			<h1>Functions</h1>
			<div class="tbl-header">
				<table cellpadding="0" cellspacing="0" border="0">
					<thead>
						<tr>
							<th>Name</th>
							<th>Namespace</th>
							<th>Updated</th>
							<th>Version</th>
							<th>Link</th>
							<th>Delete</th>
						</tr>
					</thead>
				</table>
			</div>
			<div class="tbl-content">
				<table cellpadding="0" cellspacing="0" border="0">
					<tbody>
						<% for (var i = 0 ; i < array.length; i++) { %>
						<tr>
							<td><%- array[i].name -%></td>
							<td><%- array[i].namespace -%></td>
							<td name="element_timestamp"><%- array[i].updated -%></td>
							<td><%- array[i].version -%></td>
							<td>
								<a
									href="<%-process.env.__OW_API_HOST-%>/api/v1/web/<%-array[i].namespace-%>/default/<%- array[i].name -%>"
									><%- array[i].name -%></a
								>
							</td>
							<td>
								<form id="delete_form" action="/delete_form/<%- array[i].name -%>" method="post">
									<input
										type="submit"
										id="delete_button"
										name="delete_button"
										value="DELETE"
									/>
								</form>
							</td>
						</tr>
						<% } %>
					</tbody>
				</table>
			</div>
		</section>

		<!-- follow me template -->
		<div class="made-with-love">
			<a target="_blank" href="/about">About</a>
			<a target="_blank" href="/form">Create</a>
		</div>
		<script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>

		<script src="/assets/js/table.js"></script>
	</body>

	<script>
		document.addEventListener("DOMContentLoaded", readyLoad, false);
		function readyLoad() {
			var elements = document.getElementsByName("element_timestamp");
			elements.forEach((element) => {
				var text = element.innerHTML;
				element.innerHTML = Date(text);
			});
		}
	</script>
</html>
